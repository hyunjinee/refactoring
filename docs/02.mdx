---
sidebar_position: 2
---

# 2장 리팩터링 원칙

리팩터링: [명사] 소프트웨어의 겉보기 동작은 그대로 유지한 채, 코드를 이해하고 수정하기 쉽도록 내부 구조를 변경하는 기법
리팩터링(하다): [동사] 소프트웨어의 겉보기 동작은 그대로 유지한 채, 여러 가지 리팩터링 기법을 적용해서 소프트웨어를 재구성하다.

앞에서 제시한 정의를 따르면 특정한 방식에 따라 코드를 정리하는 것만이 리팩터링이다. 리팩터링은 결국 동작을 보존하는 작은 단계들을 거쳐서 코드를 수정하고, 이러한 단계들을 순차적으로 연결하여 큰 변화를 만들어 내는 일이다.
개별 리팩터링은 그 자체로 아주 작을 수도 있고, 작은 단계가 여러 개가 합쳐진 모습일 수도 있다. 따라서 리팩터링하는 동안에는 코드가 항상 정상 작동하기 때문에 전체 작업이 끝나지 않았더라고 언제든 멈출 수 있다.
한편, 리팩터링 과정에서 발견된 버그는 리팩터링 후에도 그대로 남아야한다. 리팩터링은 성능 최적화와 비슷하다. 둘다 코드를 변경하지만 프로그램의 전반적인 기능은 그대로 유지한다.  
단지 목적이 다를 뿐이다. 리팩터링의 목적은 코드를 이해하고 수정하기 쉽게 만드는 것이다. 프로그램 성능은 좋아질 수도, 나빠질 수도 있다. 반면 성능 최적화는 오로지 속도 개선에만 신경쓴다. 그래서 목표 성능에 반드시 도달해야 한다면 코드는 다루기에 더 여렵게 바뀔 수도 있음을 각오해야한다.

## 리팩터링을 하는 이유

리팩터링을 하지 않으면 소프트웨어의 내부 설계가 썩기 쉽다. 아키텍처를 충분히 이해하지 못한채 단기 목표만을 위해 코드를 수정하다 보면 기반 구조가 무너지기 쉽다.
코드만으로 설계를 파악하기 어려워질수록 설계를 유지하기 어려워지고, 설계가 부패되는 속도는 더욱 빨라진다. 반면 규칙적인 리팩터링은 코드의 구조를 지탱해줄 것이다.

**리팩터링하면 소프트웨어를 이해하기 쉬워진다**  
프로그래밍은 여러 면에서 마치 컴퓨터와 대화하는 것과 같다. 컴퓨터에게 시킬 일을 표현하는 코드를 작성하면, 컴퓨터는 정확히 시킨대로 반응한다. 그래서 컴퓨터에게 시키려는 일과 이를 표현한 코드의 차이를 최대한 줄여야한다.  
문제는 프로그램을 동작시키는데만 신경쓰다 보면 나중에 그 코드를 다룰 개발자를 배려하지 못한다.

**리팩터링하면 버그를 쉽게 찾을 수 있다**
코드를 이해하기 쉽다는 말은 버그를 찾기 쉽다는 말이기도 하다. 리팩터링은 코드가 하는 일을 깊이 파악하게 되면서 새로 깨달은 것을 곧바로 코드에 반영하게 된다.  
프록램의 구조를 명확하게 다듬으려면 그냥 '이럴 것이다'라고 가정하던 점들이 분명히 드러나는데, 버그를 지나치려야 지나칠 수 없을 정도까지 명확해진다.

**리팩터링하면 프로그래밍 속도를 높일 수 있다**  
내부 설계가 잘 된 소프트웨어는 새로운 기능을 추가할 지점과 어떻게 고칠지를 쉽게 찾을 수 있다. 모듈화가 잘 되어있으면 전체 코드베이스중 작은 일부만 이해하면 된다.  
코드가 명확하면 버그를 만들 가능성도 줄고, 버그를 만들더라도 디버깅하기 좋다. 내부 품질이 뛰어난 코드 베이스는 새 기능 구축을 돕는 견과한 토대가 된다.  
내부 설계에 심혈을 기울이면 소프트웨어의 지구력이 높아져서 빠르게 개발할 수 있는 상태를 더 오래 지속할 수 있다.
